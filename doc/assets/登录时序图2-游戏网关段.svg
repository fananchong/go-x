<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1351" height="688" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Title:登录时序图2-游戏网关段
Client->Gateway: 1.请求登录（附带Token信息）
Gateway->Cache: 1.1 验证Token
Cache-->Gateway: 返回Token验证结果
Gateway-->Client: 返回结果1：Token验证失败，流程结束。
Note right of Gateway: 2. 若Token验证通过，继续
Note right of Gateway: 2.1 若有旧连接，断开连接
Note right of Gateway: 2.2 保存当前网络回话
Gateway->Cache: 3. 设置或覆盖 UID-GatewayID 键值对
Gateway->Hub: 4. 请求广播 玩家已登录某Gateway
Hub->Gateway(s): 4.1 通知 玩家已登录某Gateway
Note right of Gateway(s): 4.2 若有该UID网络会话，断开之。
Gateway-->Client: 返回结果2：玩家登录成功。]]></source><desc>登录时序图2-游戏网关段</desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"><rect x="10" y="10" width="189" height="30" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="17" y="31" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">登录时序图2-游戏网关段</tspan></text></g><g class="actor"><rect x="10" y="50" width="70" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="22" y="75.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">Client</tspan></text></g><g class="actor"><rect x="10" y="629" width="70" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="22" y="654.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">Client</tspan></text></g><line x1="45" x2="45" y1="89" y2="629" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="315" y="50" width="80" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="327" y="74.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="325">Gateway</tspan></text></g><g class="actor"><rect x="315" y="629" width="80" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="327" y="653.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="325">Gateway</tspan></text></g><line x1="355" x2="355" y1="89" y2="629" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="617.5" y="50" width="63" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="629.5" y="75.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="627.5">Cache</tspan></text></g><g class="actor"><rect x="617.5" y="629" width="63" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="629.5" y="654.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="627.5">Cache</tspan></text></g><line x1="649" x2="649" y1="89" y2="629" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="700.5" y="50" width="47" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="712.5" y="75.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="710.5">Hub</tspan></text></g><g class="actor"><rect x="700.5" y="629" width="47" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="712.5" y="654.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="710.5">Hub</tspan></text></g><line x1="724" x2="724" y1="89" y2="629" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="920" y="50" width="102" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="932" y="75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="930">Gateway(s)</tspan></text></g><g class="actor"><rect x="920" y="629" width="102" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="932" y="654" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="930">Gateway(s)</tspan></text></g><line x1="971" x2="971" y1="89" y2="629" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="signal"><text x="92.5" y="120" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="91.5">1.请求登录（附带Token信息）</tspan></text><line x1="45" x2="355" y1="129" y2="129" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="449.5" y="160" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="448.5">1.1 验证Token</tspan></text><line x1="355" x2="649" y1="169" y2="169" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="434.5" y="200" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="432.5">返回Token验证结果</tspan></text><line x1="649" x2="355" y1="209" y2="209" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="57" y="240" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="55">返回结果1：Token验证失败，流程结束。</tspan></text><line x1="355" x2="45" y1="249" y2="249" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="375" y="269" width="204" height="30" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="381" y="290" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="380">2. 若Token验证通过，继续</tspan></text></g><g class="note"><rect x="375" y="319" width="204" height="30" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="381" y="340" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="380">2.1 若有旧连接，断开连接</tspan></text></g><g class="note"><rect x="375" y="369" width="172" height="30" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="381" y="390" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="380">2.2 保存当前网络回话</tspan></text></g><g class="signal"><text x="366" y="430" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="365">3. 设置或覆盖 UID-GatewayID 键值对</tspan></text><line x1="355" x2="649" y1="439" y2="439" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="415" y="470" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="414">4. 请求广播 玩家已登录某Gateway</tspan></text><line x1="355" x2="724" y1="479" y2="479" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="735" y="510" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="734">4.1 通知 玩家已登录某Gateway</tspan></text><line x1="724" x2="971" y1="519" y2="519" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="991" y="539" width="259" height="30" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="997" y="560" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="996">4.2 若有该UID网络会话，断开之。</tspan></text></g><g class="signal"><text x="101" y="600" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="99">返回结果2：玩家登录成功。</tspan></text><line x1="355" x2="45" y1="609" y2="609" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g></svg>